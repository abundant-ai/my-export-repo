gemini -p 'Build an advanced code reviewer that analyzes Python files and detects common issues.

DELIVERABLE: Create a Python script named code_reviewer.py that:
1. Scans all Python files in /app/code_to_review/ directory
2. Analyzes each file for code quality issues
3. Outputs a JSON report to /app/code_review.json

The JSON output MUST follow this exact schema:

{
  "overall_score": <int 1-10>,
  "files_reviewed": <int>,
  "total_issues": <int>,
  "complexity_score": <float 1.0-10.0>,
  "maintainability_score": <float 1.0-10.0>,
  "security_score": <float 1.0-10.0>,
  "statistics": {
    "critical": <int>,
    "warning": <int>,
    "suggestion": <int>,
    "avg_cyclomatic_complexity": <float>,
    "max_function_length": <int>
  },
  "findings": [
    {
      "file": <string>,
      "line": <int>,
      "severity": <"critical"|"warning"|"suggestion">,
      "category": <"security"|"performance"|"design"|"complexity"|"style"|"maintainability"|"error_handling"|"syntax"|"file_access"|"code_smell">,
      "issue": <string>,
      "suggestion": <string>,
      "fix_confidence": <float 0.0-1.0>,
      "complexity_impact": <"low"|"medium"|"high">
    }
  ]
}

REQUIREMENTS - Your code_reviewer.py must detect:
- Security vulnerabilities: SQL injection, command injection, hardcoded credentials, dangerous eval/exec
- Code complexity: Cyclomatic complexity, long functions (>50 lines), deep nesting (>3 levels)
- Naming conventions: snake_case for functions/variables, PascalCase for classes, UPPER_CASE for constants
- Code quality: Unused variables, performance anti-patterns (inefficient loops)
- Maintainability issues: Code smells, lack of error handling

IMPORTANT:
- You MUST create code_reviewer.py in the current directory
- The script MUST write output to /app/code_review.json
- Sample Python files are already available in /app/code_to_review/ for testing
- Run your code_reviewer.py to generate the output file before tests run


' -y -m gemini-2.5-pro 2>&1 </dev/null | tee /logs/agent/gemini-cli.txt